[node]
# Dual Stack (sends/receives both IPv4 and IPv6)
listen = "[::]:9000"
# Virtual MTU of the TAP interface
mtu = 1420
# Name of the interface to create
# tap_name = "laminar0"
# TLS Identity Private Key (Base64 encoded DER)
private_key = "MC4CAQAwBQYDK2VwBCIEIP..."

# Scaling: Number of parallel streams per connection (0 = Use Datagrams/Unreliable)
streams = 4 

# Load Balancing Strategy: water_filling (default), random, sticky
bonding_mode = "water_filling"

# L2 Bridging Config (Optional)
# Uncomment to enable bridging with a physical interface
#[node.bridge]
#name = "br0"
#external_interface = "eth1"

# Network Identity
mac_address = "02:00:00:00:00:01"
dhcp = false
ipv4_address = "10.100.0.1"
ipv4_mask = "255.255.255.0"
ipv4_gateway = "10.100.0.254"
dns = ["8.8.8.8", "1.1.1.1"]

# Lifecycle Hooks
up_script = """
if [ "$(uname)" = "Darwin" ]; then
    # Use config variables if set, otherwise fallback
    IP=${LAMINAR_IP:-10.100.0.1}
    MASK=${LAMINAR_MASK:-255.255.255.0}
    ifconfig $LAMINAR_IFACE $IP $IP netmask $MASK up
else
    IP=${LAMINAR_IP:-10.100.0.1}
    MASK=${LAMINAR_MASK:-24}
    ip link set dev $LAMINAR_IFACE up && ip addr add $IP/$MASK dev $LAMINAR_IFACE
fi
"""
down_script = "echo 'Shutting down $LAMINAR_IFACE'"

[[peers]]
name = "site-b"
# Base64 encoded public key of the peer (for future mutual auth)
public_key = "..." 
# List of physical endpoints for this peer to bond across. Can be mixed IPv4 and IPv6.
endpoints = ["192.168.1.5:9000", "[2001:db8::1]:9000"]
